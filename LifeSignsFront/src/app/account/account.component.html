<div appMode class="toggleContainer">
    <div class="container">
        <div class="title">
            <h1 style="text-align: center;" class="heading"><b>Manage Your Account</b></h1>
            <hr>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col-6">
                <div class="personal">
                    <h4><b>Personal Info</b></h4>
                    <p><b>Full Name: </b>{{currentUser.firstName | titlecase}} {{currentUser.lastName | titlecase}}</p>
                    <p><b>Date of Birth: </b>{{currentUser.dob | date}}</p>
                    <p *ngIf="street2==' '; else elseBlock"><b>Home Address: </b>
                        <br>
                        {{street1}}
                        <br>
                        {{city}}, {{state}} {{zip}}
                    </p>
                    <ng-template #elseBlock>
                        <p><b>Home Address: </b>
                            <br>
                            {{street1}}
                            <br>
                            {{street2}}
                            <br>
                            {{city}}, {{state}} {{zip}}
                        </p>
                    </ng-template>
                    <button class="modal-btn" (click)="open(personal)"><b>UPDATE PERSONAL INFO</b></button>
                    <hr>
                </div>
                <div class="email">
                    <h4><b>Email</b></h4>
                    <p>{{currentUser.email}}</p>
                    <button class="modal-btn" (click)="open(email)"><b>UPDATE EMAIL</b></button>
                    <hr>
                </div>
                <div class="password">
                    <h4><b>Password</b></h4>
                    <button class="modal-btn" (click)="open(password)"><b>UPDATE PASSWORD</b></button>
                    <hr>
                </div>
            </div>
            <div class="col"></div>
        </div>
    </div>
</div>
<!-- Personal Info Update Modal -->
<ng-template #personal let-modal>
    <div appMode class="modal-header">
        <h4 class="modal-title" id="update-email">Update Personal Information</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div appMode class="modal-body">
        <form [formGroup]="">
            <div class="row">
                <div class="col">
                    <div class="form-outline">
                        <label class="form-label" for="firstname"><b>First Name: </b></label>
                        <input formControlName="firstname" type="text" class="form-control form-control-lg"
                            placeholder="Change from '{{currentUser.firstName | titlecase}}'">
                    </div>
                    <br>
                    <div class="form-outline">
                        <label class="form-label" for="lastname"><b>Last Name: </b></label>
                        <input formControlName="lastname" type="text" class="form-control form-control-lg"
                            placeholder="Change from '{{currentUser.lastName | titlecase}}'">
                    </div>
                    <br>
                    <div class="form-outline">
                        <label class="form-label" for="dob"><b>DOB: </b></label>
                        <input formControlName="dob" type="date" class="form-control form-control-lg"
                            placeholder="Change from '{{currentUser.dob | date}}'">
                    </div>
                    <br>
                    <div class="form-outline">
                        <label class="form-label"><b>Address: </b></label>
                        <input formControlName="street1" type="text" class="form-control form-control-lg"
                            placeholder="Enter address 1">
                        <br>
                        <input formControlName="street2" type="text" class="form-control form-control-lg"
                            placeholder="Enter address 2">
                        <br>
                        <label class="form-label"><b>City: </b></label>
                        <input formControlName="city" type="text" class="form-control form-control-lg"
                            placeholder="Enter city">
                        <br>
                        <label class="form-label"><b>State: </b></label>
                        <fieldset>
                            <select formControlName="state" class="form-select" aria-label="Default select example">
                              <option value="" disabled selected>Select a state</option>
                              <option value="AL">Alabama</option>
                              <option value="AK">Alaska</option>
                              <option value="AZ">Arizona</option>
                              <option value="AR">Arkansas</option>
                              <option value="CA">California</option>
                              <option value="CO">Colorado</option>
                              <option value="CT">Connecticut</option>
                              <option value="DE">Delaware</option>
                              <option value="DC">District of Columbia</option>
                              <option value="FL">Florida</option>
                              <option value="GA">Georgia</option>
                              <option value="GU">Guam</option>
                              <option value="HI">Hawaii</option>
                              <option value="ID">Idaho</option>
                              <option value="IL">Illinois</option>
                              <option value="IN">Indiana</option>
                              <option value="IA">Iowa</option>
                              <option value="KS">Kansas</option>
                              <option value="KY">Kentucky</option>
                              <option value="LA">Louisiana</option>
                              <option value="ME">Maine</option>
                              <option value="MD">Maryland</option>
                              <option value="MA">Massachusetts</option>
                              <option value="MI">Michigan</option>
                              <option value="MN">Minnesota</option>
                              <option value="MS">Mississippi</option>
                              <option value="MO">Missouri</option>
                              <option value="MT">Montana</option>
                              <option value="NE">Nebraska</option>
                              <option value="NV">Nevada</option>
                              <option value="NH">New Hampshire</option>
                              <option value="NJ">New Jersey</option>
                              <option value="NM">New Mexico</option>
                              <option value="NY">New York</option>
                              <option value="NC">North Carolina</option>
                              <option value="ND">North Dakota</option>
                              <option value="CM">Northern Marianas Islands</option>
                              <option value="OH">Ohio</option>
                              <option value="OK">Oklahoma</option>
                              <option value="OR">Oregon</option>
                              <option value="PA">Pennsylvania</option>
                              <option value="PR">Puerto Rico</option>
                              <option value="RI">Rhode Island</option>
                              <option value="SC">South Carolina</option>
                              <option value="SD">South Dakota</option>
                              <option value="TN">Tennessee</option>
                              <option value="TX">Texas</option>
                              <option value="UT">Utah</option>
                              <option value="VT">Vermont</option>
                              <option value="VA">Virginia</option>
                              <option value="VI">Virgin Islands</option>
                              <option value="WA">Washington</option>
                              <option value="WV">West Virginia</option>
                              <option value="WI">Wisconsin</option>
                              <option value="WY">Wyoming</option>
                            </select>
                          </fieldset>
                        <br>
                        <label class="form-label"><b>Zip Code: </b></label>
                        <input formControlName="zip" type="text" class="form-control form-control-lg"
                            placeholder="Enter zip code">
                    </div>
                    <br>
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-outline-dark" (click)="updateEmail(infoForm)">
                            Save
                        </button>
                    </div>
                    <br>
                    <p id="message"></p>
                </div>
            </div>
        </form>
    </div>
    <div appMode class="modal-footer">
        <button type="button" class=" saveBtn btn" (click)="modal.close('Save click')">Save</button>
    </div>
</ng-template>

<!-- Email Update Modal -->
<ng-template #email let-modal>
    <div appMode class="modal-header">
        <h4 class="modal-title" id="update-email">Change Email Address</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div appMode class="modal-body">
        <form [formGroup]="emailForm">
            <div class="row">
                <div class="col">
                    <p><b>Current Email: </b>{{currentUser.email}}</p>
                    <div class="form-outline">
                        <label class="form-label" for="newEmail"><b>New Email: </b></label>
                        <input formControlName="newEmail" type="text" class="form-control form-control-lg"
                            placeholder="Enter new email">
                    </div>
                    <br>
                    <div class="d-flex justify-content-center">
                        <button type="submit" class=" saveBtn btn" (click)="updateEmail(emailForm)">
                            Save
                        </button>
                    </div>
                    <br>
                    <p id="message"></p>
                </div>
            </div>
        </form>
    </div>
    <div appMode class="modal-footer">
        <button type="button" class="saveBtn btn" (click)="modal.close('Save click')">Save</button>
    </div>
</ng-template>

<!-- Password Update Modal -->
<ng-template #password let-modal>
    <div appMode class="modal-header">
        <h4 class="modal-title" id="update-password">Update Password</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div appMode class="modal-body">
        <form [formGroup]="passwordForm">
            <div class="row">
                <div class="col">
                    <div class="form-outline">
                        <label class="form-label" for="currentPassword"><b>Current Password: </b></label>
                        <input formControlName="currentPassword" type="password" class="form-control form-control-lg"
                            placeholder="Enter current password">
                    </div>
                    <br>
                    <div class="form-outline">
                        <label class="form-label" for="newPassword"><b>New Password: </b></label>
                        <input formControlName="newPassword" type="password" class="form-control form-control-lg"
                            placeholder="Enter new password">
                        <p class="info"><small>Must include at least 1 lowercase, 1 uppercase, 1 number, and 1
                                special character (8-20 characters).</small></p>
                    </div>
                    <br>
                    <div class="form-outline">
                        <label class="form-label" for="passwordAgain"><b>Confirm New Password: </b></label>
                        <input formControlName="passwordAgain" type="password" class="form-control form-control-lg"
                            placeholder="Enter new password again">
                        <p class="info"><small>Passwords must match.</small></p>
                    </div>

                    <div class="d-flex justify-content-center">
                        <button type="submit" class="saveBtn btn" (click)="updatePwd(passwordForm)">
                            Save
                        </button>
                    </div>
                    <br>
                    <p id="message"></p>
                </div>
            </div>
        </form>
    </div>
</ng-template>
